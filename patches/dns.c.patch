diff --git a/dirmngr/dns.c b/dirmngr/dns.c
index e578fe8..2ba027e 100644
--- a/dirmngr/dns.c
+++ b/dirmngr/dns.c
@@ -1091,7 +1091,33 @@ static char *dns_strsep(char **sp, const char *delim) {
 
 	return p;
 } /* dns_strsep() */
-
+#elif defined __MVS__
+static char *
+dns_strsep(char **stringp, const char *delim)
+{
+    char *s;
+    const char *spanp;
+    int c, sc;
+    char *tok;
+
+    if ((s = *stringp) == NULL)
+        return NULL;
+
+    for (tok = s; ; ) {
+        c = *s++;
+        spanp = delim;
+        do {
+            if ((sc = *spanp++) == c) {
+                if (c == 0)
+                    s = NULL;
+                else
+                    s[-1] = 0;
+                *stringp = s;
+                return tok;
+            }
+        } while (sc != 0);
+    }
+}
 #else
 #define dns_strsep(...)	strsep(__VA_ARGS__)
 #endif
@@ -1188,7 +1214,7 @@ static size_t dns_recv(int fd, void *dst, size_t lim, int flags, dns_error_t *er
 } /* dns_recv() */
 
 static size_t dns_send_nopipe(int fd, const void *src, size_t len, int flags, dns_error_t *_error) {
-#if _WIN32 || !defined SIGPIPE || defined SO_NOSIGPIPE
+#if _WIN32 || !defined SIGPIPE || defined SO_NOSIGPIPE || defined __MVS__
 	return dns_send(fd, src, len, flags, _error);
 #elif defined MSG_NOSIGNAL
 	return dns_send(fd, src, len, (flags|MSG_NOSIGNAL), _error);
