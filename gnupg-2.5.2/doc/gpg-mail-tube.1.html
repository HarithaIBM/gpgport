<!-- Created from Texinfo source by yat2m 1.51 -->
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <title>GPG-MAIL-TUBE(1)</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/share/site.css" type="text/css" />
</head>
<body>
<div id="wrapper">
<div id="content">
<div class="y2m">
<p class="y2m y2m-top"><span class="y2m-left">GPG-MAIL-TUBE(1)</span> <span class="y2m-center">GNU Privacy Guard 2.6</span> <span class="y2m-right">GPG-MAIL-TUBE(1)</span></p>
<div class="y2m-section">
<h2 class="y2m-sh">NAME</h2>
@para{}<strong>gpg-mail-tube</strong>
 &mdash; Encrypt rfc822 formatted mail in a pipeline
</div>
<div class="y2m-section">
<h2 class="y2m-sh">SYNOPSIS</h2>
@para{}<strong>gpg-mail-tube</strong>
<span>[</span>  <em>options</em>  <span>]</span>
<em>recipients</em>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">DESCRIPTION</h2>

<p><i>gpg-mail-tube</i> takes RFC-822 formatted mail on stdin and
turns it into a PGP/MIME encrypted mail which is then written to
stdout.
</p>

<p>
The recipients must be plain mail addresses
(e.g. <samp>foo@example.org</samp>) and should in general list the To and
Cc addresses contained in the mail.
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">OPTIONS</h2>

<p>
<i>gpg-mail-tube</i> understands these options:
</p>

<p>
<ul>

<li><span class="y2m-item">--verbose</span>
    <span class="y2m-item">-v</span>
Enable extra informational output.

</li>
<li><span class="y2m-item">--quiet</span>
    <span class="y2m-item">-q</span>
Try to be as quiet as possible.

</li>
<li><span class="y2m-item">--log-file <span class="y2m-args"><u>file</u></span></span>
Write log output to <u>file</u>.  Use socket:// to log to a
socket.

</li>
<li><span class="y2m-item">--no-stderr</span>
Suppresses all output to stderr.  This is useful for callers which
don't distinguish stdout and stderr.  To get diagnostics the option
<samp>--log-file</samp> can be used.

</li>
<li><span class="y2m-item">--header <span class="y2m-args"><u>name</u>=<u>value</u></span></span>
Add the mail header "<u>name</u>: <u>value</u>" to the output.

</li>
<li><span class="y2m-item">--setenv <span class="y2m-args"><u>name</u>=<u>value</u></span></span>
Put the given environment string into the environment of this process
and of the called gpg.  This option is required if there is no other
way to set the environemt.

</li>
<li><span class="y2m-item">--as-attach</span>
    <span class="y2m-item">-a</span>
Do not write a PGP/MIME mail but emit a simple body along with an
attachment containing the encrypted body of the input mail.  If the
input was a plain text message a simple encrypted file will be
attached.  If the input was a multipart MIME message the encrypted
file is of type message/rfc822.

</li>
<li><span class="y2m-item">--gpg <span class="y2m-args"><u>gpgcmd</u></span></span>
Use the specified command <u>gpgcmd</u> instead of <i>gpg</i>.

</li>
<li><span class="y2m-item">--vsd</span>
Use the gpg from a <em>GnuPG VS-DesktopÂ®</em> AppImage.  The AppImage is
started if it is not running.  A symlink named
~/.gnupg-vsd/gnupg-vs-desktop.AppImage needs to link to the
actually to be used AppImage.

</li>
<li><span class="y2m-item">--version</span>
Print version of the program and exit.

</li>
<li><span class="y2m-item">--help</span>
Display a brief help page and exit.

</li>
</ul>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">EXAMPLES</h2>

<p></p>

<p>

The following options can be used in a local transport rule of the
Exim MTA which assumes that that <samp>check_local_user</samp> has been
used in the router.
</p>

<p>

<pre>
transport_filter = /usr/local/bin/gpg-mail-tube --setenv HOME=${home} &bsol;
                   --no-stderr -- $pipe_addresses
</pre>
</p>

<p>

For a remote transport the use of <samp>size_addition</samp> and an
explicit setting of the user and its home directory might be required.
To avoid permission problems it is often better to use a service like
<i>userv</i> to run the command under a different user.  This can
be done by using this transport_filter:
</p>

<p>

<pre>
transport_filter = /usr/bin/userv -- foo gpg-mail-tube $pipe_addresses
</pre>
</p>

<p>
With <u>foo</u> being the account name used by GnuPG.  In that user's
home directory you will install a file ~/.userv/rc with this
content:
</p>

<p>

<pre>
if ( glob service gpg-mail-tube
     &amp; glob calling-user Debian-exim
     &amp; glob service-user foo
   )
   reset
   errors-to-syslog
   no-suppress-args
   execute /usr/local/bin/gpg-mail-tube &bsol;
      -v --no-stderr &bsol;
      --log-file /home/foo/logs/mail-tube.log &bsol;
      --setenv HOME=/home/foo  --
   quit
fi
</pre>
</p>

<p>
Take care to have the trailing double dashes and adjust the log-file
as needed.  The errors-to-syslog statement makes sure that errors
pertaining to the userv system (e.g. script errors) are directed to
the syslog (facility is "user", level is "error").  If needed replace
Debian-exim by the name of the user under which Exim is running.
</p>

<p>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">DIAGNOSTICS</h2>

<p>
The program returns 0 on a successful encryption or a non-zero value
on error.  Note that on error some output might have already been
written to stdout.
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">SEE ALSO</h2>

<p><i><a href="gpg.1.html">gpg</a>(1)</i>,
</p>

<p>
The full documentation for this tool is maintained as a Texinfo manual.
If GnuPG and the info program are properly installed at your site, the
command
</p>

<p>

<pre>
info gnupg
</pre>
</p>

<p>
should give you access to the complete manual including a menu structure
and an index.
</p>

<p>
</p>

<p>
</p>

<p>

</div>
<p class="y2m y2m-footer"><span class="y2m-left">GnuPG 2.5.2</span> <span class="y2m-center">2024-11-22</span> <span class="y2m-right">GPG-MAIL-TUBE(1)</span></p>
</div><!-- class y2m -->
</div><!-- end content -->
</div><!-- end wrapper -->
</body>
</html>
