<!-- Created from Texinfo source by yat2m 1.51 -->
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
 <title>SCDAEMON(1)</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/share/site.css" type="text/css" />
</head>
<body>
<div id="wrapper">
<div id="content">
<div class="y2m">
<p class="y2m y2m-top"><span class="y2m-left">SCDAEMON(1)</span> <span class="y2m-center">GNU Privacy Guard 2.6</span> <span class="y2m-right">SCDAEMON(1)</span></p>
<div class="y2m-section">
<h2 class="y2m-sh">NAME</h2>
@para{}<strong>scdaemon</strong>
 &mdash; Smartcard daemon for the GnuPG system
</div>
<div class="y2m-section">
<h2 class="y2m-sh">SYNOPSIS</h2>
@para{}<strong> scdaemon</strong>
<span>[</span>  <strong>--homedir</strong>
<em>dir</em>  <span>]</span>
<span>[</span>  <strong>--options</strong>
<em>file</em>  <span>]</span>
<span>[</span>  <em>options</em>  <span>]</span>
<strong> --server</strong>
<br/>
<strong> scdaemon</strong>
<span>[</span>  <strong>--homedir</strong>
<em>dir</em>  <span>]</span>
<span>[</span>  <strong>--options</strong>
<em>file</em>  <span>]</span>
<span>[</span>  <em>options</em>  <span>]</span>
<strong> --daemon</strong>
<span>[</span>  <em>command_line</em>  <span>]</span>

<p>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">DESCRIPTION</h2>

<p>The <i>scdaemon</i> is a daemon to manage smartcards.  It is usually
invoked by <i>gpg-agent</i> and in general not used directly.
</p>

<p>
</p>

<p>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">COMMANDS</h2>

<p></p>

<p>
</p>

<p>
Commands are not distinguished from options except for the fact that
only one command is allowed.
</p>

<p>
<ul>
<li><span class="y2m-item">--version</span>
Print the program version and licensing information.  Note that you cannot
abbreviate this command.

</li>
<li><span class="y2m-item">--help, <span class="y2m-args">-h</span></span>
Print a usage message summarizing the most useful command-line options.
Note that you cannot abbreviate this command.

</li>
<li><span class="y2m-item">--dump-options</span>
Print a list of all available options and commands.  Note that you cannot
abbreviate this command.

</li>
<li><span class="y2m-item">--server</span>
Run in server mode and wait for commands on the <samp>stdin</samp>.  The
default mode is to create a socket and listen for commands there.

</li>
<li><span class="y2m-item">--multi-server</span>
Run in server mode and wait for commands on the <samp>stdin</samp> as well as
on an additional Unix Domain socket.  The server command <samp>GETINFO</samp>
may be used to get the name of that extra socket.

</li>
<li><span class="y2m-item">--daemon</span>
Run the program in the background.  This option is required to prevent
it from being accidentally running in the background.

</li>
</ul>
</p>

<p>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">OPTIONS</h2>

<p></p>

<p>
</p>

<p>
<ul>

<li><span class="y2m-item">--options <span class="y2m-args"><u>file</u></span></span>
Reads configuration from <u>file</u> instead of from the default
per-user configuration file.  The default configuration file is named
scdaemon.conf and expected in the .gnupg directory directly
below the home directory of the user.

</li>
<li><span class="y2m-item">--homedir <span class="y2m-args"><u>dir</u></span></span>
Set the name of the home directory to <u>dir</u>. If this option is not
used, the home directory defaults to ~/.gnupg.  It is only
recognized when given on the command line.  It also overrides any home
directory stated through the environment variable GNUPGHOME or
(on Windows systems) by means of the Registry entry
<u>HKCU&bsol;Software&bsol;GNU&bsol;GnuPG:HomeDir</u>.

On Windows systems it is possible to install GnuPG as a portable
application.  In this case only this command line option is
considered, all other ways to set a home directory are ignored.


</li>
<li><span class="y2m-item">-v</span>
</li>
<li><span class="y2m-item">--verbose</span>
Outputs additional information while running.
You can increase the verbosity by giving several
verbose commands to <i>gpgsm</i>, such as -vv.

</li>
<li><span class="y2m-item">--debug-level <span class="y2m-args"><u>level</u></span></span>
Select the debug level for investigating problems.  <u>level</u> may be
a numeric value or a keyword:

</li>
<ul>
<li><span class="y2m-item">none</span>
No debugging at all.  A value of less than 1 may be used instead of
the keyword.
</li>
<li><span class="y2m-item">basic</span>
Some basic debug messages.  A value between 1 and 2 may be used
instead of the keyword.
</li>
<li><span class="y2m-item">advanced</span>
More verbose debug messages.  A value between 3 and 5 may be used
instead of the keyword.
</li>
<li><span class="y2m-item">expert</span>
Even more detailed messages.  A value between 6 and 8 may be used
instead of the keyword.
</li>
<li><span class="y2m-item">guru</span>
All of the debug messages you can get. A value greater than 8 may be
used instead of the keyword.  The creation of hash tracing files is
only enabled if the keyword is used.
</li>
</ul>

How these messages are mapped to the actual debugging flags is not
specified and may change with newer releases of this program. They are
however carefully selected to best aid in debugging.

All debugging options are subject to change and thus should not be used
by any application program.  As the name says, they are only used as
helpers to debug problems.
xx

<li><span class="y2m-item">--debug <span class="y2m-args"><u>flags</u></span></span>
Set debug flags.  All flags are or-ed and <u>flags</u> may be given
in C syntax (e.g., 0x0042) or as a comma separated list of flag names.
To get a list of all supported flags the single word "help" can be
used. This option is only useful for debugging and the behavior may
change at any time without notice.

</li>
<li><span class="y2m-item">--debug-all</span>
Same as <samp>--debug=0xffffffff</samp>

</li>
<li><span class="y2m-item">--debug-wait <span class="y2m-args"><u>n</u></span></span>
When running in server mode, wait <u>n</u> seconds before entering the
actual processing loop and print the pid.  This gives time to attach a
debugger.

</li>
<li><span class="y2m-item">--debug-ccid-driver</span>
Enable debug output from the included CCID driver for smartcards.
Using this option twice will also enable some tracing of the T=1
protocol.  Note that this option may reveal sensitive data.

</li>
<li><span class="y2m-item">--debug-disable-ticker</span>
This option disables all ticker functions like checking for card
insertions.

</li>
<li><span class="y2m-item">--debug-allow-core-dump</span>
For security reasons we won't create a core dump when the process
aborts.  For debugging purposes it is sometimes better to allow core
dump.  This option enables it and also changes the working directory to
/tmp when running in <samp>--server</samp> mode.

</li>
<li><span class="y2m-item">--debug-log-tid</span>
This option appends a thread ID to the PID in the log output.

</li>
<li><span class="y2m-item">--debug-assuan-log-cats <span class="y2m-args"><u>cats</u></span></span>
Changes the active Libassuan logging categories to <u>cats</u>.  The
value for <u>cats</u> is an unsigned integer given in usual C-Syntax.
A value of 0 switches to a default category.  If this option is not
used the categories are taken from the environment variable
<samp>ASSUAN_DEBUG</samp>.  Note that this option has only an effect if the
Assuan debug flag has also been with the option <samp>--debug</samp>.  For
a list of categories see the Libassuan manual.

</li>
<li><span class="y2m-item">--no-detach</span>
Don't detach the process from the console.  This is mainly useful for
debugging.

</li>
<li><span class="y2m-item">--listen-backlog <span class="y2m-args"><u>n</u></span></span>
Set the size of the queue for pending connections.  The default is 64.
This option has an effect only if <samp>--multi-server</samp> is also
used.

</li>
<li><span class="y2m-item">--log-file <span class="y2m-args"><u>file</u></span></span>
Append all logging output to <u>file</u>.  This is very helpful in
seeing what the agent actually does.  Use socket:// to log to
socket.

</li>
<li><span class="y2m-item">--pcsc-shared</span>
Use shared mode to access the card via PC/SC.  This is a somewhat
dangerous option because Scdaemon assumes exclusive access to the
card and for example caches certain information from the card.  Use
this option only if you know what you are doing.

</li>
<li><span class="y2m-item">--pcsc-driver <span class="y2m-args"><u>library</u></span></span>
Use <u>library</u> to access the smartcard reader.  The current default
on Unix is libpcsclite.so and on Windows winscard.dll.
Instead of using this option you might also want to install a symbolic
link to the default file name (e.g., from libpcsclite.so.1).
A Unicode file name may not be used on Windows.

</li>
<li><span class="y2m-item">--disable-ccid</span>
The integrated CCID driver for CCID compliant devices can be available
when libusb was detected at build time, and it is used to access the
smartcard reader.  If access via PC/SC driver is needed, please
configure this option to disable CCID driver support (if any).  In
GnuPG 2.2, there was a fallback mechanism from CCID driver to PC/SC
driver.  The fallback mechanism worked, because scdaemon in GnuPG 2.2
only supported a single token/reader.  To support of multiple
tokens/readers at the same time, fallback mechanism was removed.

</li>
<li><span class="y2m-item">--reader-port <span class="y2m-args"><u>number_or_string</u></span></span>
This option may be used to specify the port of the card terminal.  A
value of 0 refers to the first serial device; add 32768 to access USB
devices.  The default is 32768 (first USB device).  PC/SC or CCID
readers might need a string here; run the program in verbose mode to get
a list of available readers.  The default is then the first reader
found.

To get a list of available CCID readers you may use this command:

<pre>
  echo scd getinfo reader_list &bsol;
    | gpg-connect-agent --decode | awk '/^D/ {print $2}'
</pre>

</li>
<li><span class="y2m-item">--card-timeout <span class="y2m-args"><u>n</u></span></span>
This option is deprecated.  In GnuPG 2.0, it used to be used for
DISCONNECT command to control timing issue.  Since DISCONNECT command
works synchronously, it has no effect.

</li>
<li><span class="y2m-item">--enable-pinpad-varlen</span>
Please specify this option when the card reader supports variable
length input for pinpad (default is no).  For known readers (listed in
ccid-driver.c and apdu.c), this option is not needed.  Note that if
your card reader doesn't supports variable length input but you want
to use it, you need to specify your pinpad request on your card.


</li>
<li><span class="y2m-item">--disable-pinpad</span>
Even if a card reader features a pinpad, do not try to use it.


</li>
<li><span class="y2m-item">--deny-admin</span>
This option disables the use of admin class commands for card
applications where this is supported.  Currently we support it for the
OpenPGP card. This option is useful to inhibit accidental access to
admin class command which could ultimately lock the card through wrong
PIN numbers.  Note that GnuPG versions older than 2.0.11 featured an
<samp>--allow-admin</samp> option which was required to use such admin
commands.  This option has no more effect today because the default is
now to allow admin commands.

</li>
<li><span class="y2m-item">--disable-application <span class="y2m-args"><u>name</u></span></span>
This option disables the use of the card application named
<u>name</u>.  This is mainly useful for debugging or if a application
with lower priority should be used by default.

</li>
<li><span class="y2m-item">--application-priority <span class="y2m-args"><u>namelist</u></span></span>
This option allows one to change the order in which applications of a card
a tried if no specific application was requested.  <u>namelist</u> is a
space or comma delimited list of application names.  Unknown names are
simply skipped.  Applications not mentioned in the list are put in the
former order at the end of the new priority list.

To get the list of current active applications, use

<pre>
    gpg-connect-agent 'scd getinfo app_list' /bye
</pre>

</li>
</ul>
</p>

<p>
All the long options may also be given in the configuration file after
stripping off the two leading dashes.
</p>

<p>
</p>

<p>
</div>
<div class="y2m-section">
<h2 class="y2m-sh">CARD APPLICATIONS</h2>

<p></p>

<p>
<i>scdaemon</i> supports the card applications as described below.
</p>

<p>
</p>

<p>
<h3> The OpenPGP card application ``openpgp''</h3>
</p>

<p>
This application is currently only used by <i>gpg</i> but may in
future also be useful with <i>gpgsm</i>.  Version 1 and version 2 of
the card is supported.
</p>

<p>

The specification for this card is available at
https://gnupg.org/ftp/specs/ .
</p>

<p>
<h3> The Telesec NetKey card ``nks''</h3>
</p>

<p>
This is the main application of the Telesec cards as available in
Germany.  It is a superset of the German DINSIG card.  The card is
used by <i>gpgsm</i>.
</p>

<p>
<h3> The DINSIG card application ``dinsig''</h3>
</p>

<p>
This is an application as described in the German draft standard
<em>DIN V 66291-1</em>.  It is intended to be used by cards supporting
the German signature law and its bylaws (SigG and SigV).
</p>

<p>
<h3> The PKCS#15 card application ``p15''</h3>
</p>

<p>
This is common framework for smart card applications.  It is used by
<i>gpgsm</i>.
</p>

<p>
<h3> The Geldkarte card application ``geldkarte''</h3>
</p>

<p>
This is a simple application to display information of a German
Geldkarte.  The Geldkarte is a small amount debit card application which
comes with almost all German banking cards.
</p>

<p>
<h3> The SmartCard-HSM card application ``sc-hsm''</h3>
</p>

<p>
This application adds read-only support for keys and certificates
stored on a http://www.smartcard-hsm.com, SmartCard-HSM.
</p>

<p>
To generate keys and store certificates you may use
https://github.com/OpenSC/OpenSC/wiki/SmartCardHSM, OpenSC or
the tools from http://www.openscdp.org, OpenSCDP.
</p>

<p>
The SmartCard-HSM cards requires a card reader that supports Extended
Length APDUs.
</p>

<p>
<h3> The Undefined card application ``undefined''</h3>
</p>

<p>
This is a stub application to allow the use of the APDU command even
if no supported application is found on the card.  This application is
not used automatically but must be explicitly requested using the
SERIALNO command.
</p>

<p>
</p>

<p>

</div>
<div class="y2m-section">
<h2 class="y2m-sh">EXAMPLES</h2>

<p></p>

<p>
</p>

<p>

<pre>
$ scdaemon --server -v
</pre>
</p>

<p>
</p>

<p>

</div>
<div class="y2m-section">
<h2 class="y2m-sh">FILES</h2>

<p></p>

<p>
There are a few configuration files to control certain aspects of
<i>scdaemons</i>'s operation. Unless noted, they are expected in the
current home directory (option --homedir).
</p>

<p>
<ul>

<li><span class="y2m-item">scdaemon.conf</span>
This is the standard configuration file read by <i>scdaemon</i> on
startup.  It may contain any valid long option; the leading two dashes
may not be entered and the option may not be abbreviated.  This default
name may be changed on the command line (option --options).

</li>
<li><span class="y2m-item">scd-event</span>
If this file is present and executable, it will be called on every card
reader's status change.  An example of this script is provided with the
source code distribution.  This option is deprecated in favor of the
<i>DEVINFO --watch</i>.

</li>
<li><span class="y2m-item">reader_@var{n}.status</span>
This file is created by <i>scdaemon</i> to let other applications now
about reader status changes.  Its use is now deprecated in favor of
scd-event.

</li>
</ul>
</p>

<p>
</p>

<p>

</div>
<div class="y2m-section">
<h2 class="y2m-sh">SEE ALSO</h2>

<p><i><a href="gpg-agent.1.html">gpg-agent</a>(1)</i>,
<i><a href="gpgsm.1.html">gpgsm</a>(1)</i>,
<i><a href="gpg.1.html">gpg</a>(1)</i>
</p>

<p>
The full documentation for this tool is maintained as a Texinfo manual.
If GnuPG and the info program are properly installed at your site, the
command
</p>

<p>

<pre>
info gnupg
</pre>
</p>

<p>
should give you access to the complete manual including a menu structure
and an index.
</div>
<p class="y2m y2m-footer"><span class="y2m-left">GnuPG 2.5.2</span> <span class="y2m-center">2024-11-22</span> <span class="y2m-right">SCDAEMON(1)</span></p>
</div><!-- class y2m -->
</div><!-- end content -->
</div><!-- end wrapper -->
</body>
</html>
